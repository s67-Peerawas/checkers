import tkinter as tk

def create_board(canvas, rows, cols, square_size):
    colors = ["#D18B47", "#FFCE9E"]  
    for row in range(rows):
        for col in range(cols):
            color = colors[(row + col) % 2]
            x1 = col * square_size
            y1 = row * square_size
            x2 = x1 + square_size
            y2 = y1 + square_size
            canvas.create_rectangle(x1, y1, x2, y2, fill=color)

def create_pieces(canvas, rows, cols, square_size):
    piece_radius = square_size // 2 - 5  
    dark_square_color = "#D18B47"  

    for row in range(rows):
        for col in range(cols):
            if (row + col) % 2 == 0:  
                if row < 3:  
                    draw_piece(canvas, row, col, square_size, piece_radius, "black")
                elif row > 4:  
                    draw_piece(canvas, row, col, square_size, piece_radius, "white")

def draw_piece(canvas, row, col, square_size, radius, color):
    x_center = col * square_size + square_size // 2
    y_center = row * square_size + square_size // 2
    piece = canvas.create_oval(x_center - radius, y_center - radius,
                               x_center + radius, y_center + radius, fill=color, tags="piece")
    canvas.tag_bind(piece, "<Button-1>", lambda event, r=row, c=col: piece_clicked(event, r, c, canvas, square_size))

def piece_clicked(event, row, col, canvas, square_size):
    clear_highlights(canvas)  
    possible_moves = calculate_possible_moves(row, col) 
    highlight_moves(canvas, possible_moves, square_size)  

def calculate_possible_moves(row, col):
    moves = []
    if row < 3:  
        if row + 1 < 8 and col - 1 >= 0:  
            moves.append((row + 1, col - 1))
        if row + 1 < 8 and col + 1 < 8:  
            moves.append((row + 1, col + 1))
    elif row > 4:  
        if row - 1 >= 0 and col - 1 >= 0:  
            moves.append((row - 1, col - 1))
        if row - 1 >= 0 and col + 1 < 8:  
            moves.append((row - 1, col + 1))
    return moves

def highlight_moves(canvas, moves, square_size):
    for move in moves:
        row, col = move
        x1 = col * square_size
        y1 = row * square_size
        x2 = x1 + square_size
        y2 = y1 + square_size
        canvas.create_rectangle(x1, y1, x2, y2, outline="green", width=5, tags="highlight")

def clear_highlights(canvas):
    canvas.delete("highlight")

def main():
    window = tk.Tk()
    window.title("Checkers with Clickable Pieces")

    board_size = 8
    square_size = 60

    canvas = tk.Canvas(window, width=board_size * square_size, height=board_size * square_size)
    canvas.pack()

    create_board(canvas, board_size, board_size, square_size)

    create_pieces(canvas, board_size, board_size, square_size)

    window.mainloop()

if __name__ == "__main__":
    main()
